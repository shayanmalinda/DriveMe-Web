<app-ngxspinner></app-ngxspinner>
<div class="container navbar-margin">   
    <div class="container-fluid pl-5 pr-5 pt-3 pb-2 fill-form">

        <p style="margin:0px;font-size: 30px; font-weight: 400;font-family: Georgia, 'Times New Roman', Times, serif">Change User Password</p>
        <section *ngIf="waiting" style="display: flex; align-content: center; align-items: center;margin-top: 30px; margin-left: 20px; margin-right: 20px;">
            <mat-progress-bar  color="warn" mode="indeterminate" value="50" bufferValue="75">
        </mat-progress-bar>
        </section>
        <mat-horizontal-stepper [linear]="isLinear" #stepper>
            <mat-step [stepControl]="firstFormGroup" >
                <form [formGroup]="firstFormGroup">
                    <ng-template matStepLabel>Password</ng-template>
                    <mat-form-field class="form-field-full-width">
                        <input [(ngModel)]="prevPass" matInput placeholder="Previous Password"  [type]="hide1 ? 'password' : 'text'" formControlName="ctrl1" required>
                        <button mat-icon-button matSuffix (click)="hide1 = !hide1" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide1"> 
                        <mat-icon color="accent">{{hide1 ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                    </mat-form-field><br>
                    <mat-form-field class="form-field-full-width">
                        <input [(ngModel)]="pass1" matInput placeholder="New Password"  [type]="hide2 ? 'password' : 'text'" formControlName="ctrl2" required>
                        <button mat-icon-button matSuffix (click)="hide2 = !hide2" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide2"> 
                        <mat-icon color="accent">{{hide2 ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                    </mat-form-field><br>
                    <mat-form-field class="form-field-full-width pb-0">
                        <input [(ngModel)]="pass2" matInput placeholder="Re-Enter New Password"  [type]="hide3 ? 'password' : 'text'"   formControlName="ctrl3" required>
                        <button mat-icon-button matSuffix (click)="hide3 = !hide3" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide3" >
                        <mat-icon color="accent">{{hide3 ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                    </mat-form-field>
                    
                    <div style="height: 20px;">
                        <div *ngIf="passwordDiv">
                            <section *ngIf="pass1!=pass2?true:false" style="font-size: 12px;color: red;">
                                <p style="font-weight: 550;">Password Mismatched</p>
                            </section>
                            <section *ngIf="pass1==pass2?true:false" style="font-size: 12px; color: rgb(6, 190, 6);">
                                <p style="font-weight: 550;">Password Matched</p>
                            </section>
                        </div><br>
                    </div>
                    <div class="pt-3">
                        <button mat-raised-button color="primary" (click)="stepperNext(stepper)">Next</button>
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel>Confirm</ng-template>
                Please Confirm the Details
                <div class="pt-3">
                    <button mat-raised-button color="accent" matStepperPrevious  class="mr-4">Go Back</button>
                    <button mat-raised-button color="primary" (click)="changePassword()">Confirm</button>
                </div>
            </mat-step>
        </mat-horizontal-stepper>
    </div>
</div>
